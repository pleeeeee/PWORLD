<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link href="/resources/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Poor+Story&display=swap" rel="stylesheet">
    <style>
      body { font-family: 'Poor Story', cursive; }
      .login-div { margin: 80px 30px 0 30px; }
      .hello-div { margin-bottom: 100px;}
      #gocoder_typing { margin: 30px 10px 0 10px; }
      .mb-10 { margin-bottom: 0 0 10px 0; }
      .hidden-div { display: none; }
    </style>
 	<!-- JS -->
    <Script src="/resources/scripts/jquery-3.4.1.min.js"></script>
    <Script src="/resources/vendor/bootstrap/js/bootstrap.min.js"></script>
    <script src="https://www.cssscript.com/demo/simple-typewriter-effect-pure-javascript-typewriterjs/typewriter.js"></script>
<title>íŒŒêµ­ì´ì›”ë“œ</title>
</head>
<body>

<div class="login-div">
  <div class="hello-div">
    <p class="lead" id="main-welcom-typing"></p>
  </div>

  <div class="form-group">
    <select id="ids" class="form-control mb-10">
      <option value="">ì•„ì´ë””ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.</option>
    </select>
    <input type="password" class="form-control " placeholder="ë¹„ë°€ë²ˆí˜¸" id="passwordInput">
    <div class="invalid-feedback hidden-div">ì•”í˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</div>
  </div>
</div>

<div class="modal" id="login-success-modal">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Welcome Park's world!</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
      	<img alt="" src="/resources/image/image0001.gif"/>
        <p id = 'username'></p>
        <p>ì˜¤ëŠ˜ë„ í™”ì´íŒ…í•˜ì„¸ìš”.ğŸ™‹ğŸ»â€â™€ï¸</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-success" id="btn-main">start</button>
      </div>
    </div>
  </div>
</div>
</body>
<script>
var typing = document.getElementById('main-welcom-typing');
var typewriter = new Typewriter(typing, {
    loop: true
});
 
typewriter.typeString('íŒŒêµ­ì´ ì›”ë“œì— ì˜¤ì‹ ê±¸ ')
    .pauseFor(700)
    .deleteAll()
    .typeString("Park's ì›”ë“œì— ì˜¤ì‹ ê±¸ ")
    .pauseFor(400)
    .typeString('í™˜ì˜í•©ë‹ˆë‹¤.')
    .pauseFor(500)
    .deleteChars(1)
    .typeString('!!!!')
    .pauseFor(700)
    .typeString(' :)')
    .pauseFor(2000)
    .start();

var login = function (userPwd) {
	$.ajax({
	     url:'/login/'+userPwd,
	     type:'post',
	     dataType: "json",
	     success:function(data) {
	         console.log(data)
	         $('#username').text(data.user.userName + ' íŠ¸ë ˆì´ë„ˆë‹˜ í™˜ì˜í•©ë‹ˆë‹¤. :)');
	     }
	});
}

var init = function() {
	//select id list
	$.ajax({
	     url:'/login/'+userPwd,
	     type:'post',
	     dataType: "json",
	     success:function(data) {
	         console.log(data)
	         $('#username').text(data.user.userName + ' íŠ¸ë ˆì´ë„ˆë‹˜ í™˜ì˜í•©ë‹ˆë‹¤. :)');
	     }
	});
}
    
$(document).ready(function() {
	
	init();
	
	$(document).on('keyup', '#passwordInput', function() {
		console.log($(this).val());
		if ( $(this).val() == 'ë‚´ì‚¬ë‘ì´ë˜ë¯¸' ) {
			$(this).removeClass('is-invalid');
			$(this).next('div').addClass('hidden-div');
			$(this).blur();
			login($(this).val());
			$('#login-success-modal').modal();
		} else {
			$(this).addClass('is-invalid');
			$(this).next('div').removeClass('hidden-div');
		}
	});
	
	$(document).on('click', '#btn-main', function() {
		$(location).attr('href', '/main.html');
	});
});
</script>
</html>